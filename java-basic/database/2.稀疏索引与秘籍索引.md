
## 密集索引和稀疏索引的区别

- 密集索引文件中的每个搜索码值都只对应一个索引值

- 稀疏索引文件中只为索引码的某些值建立索引

## MySQL 存储数据引擎

MySQL 有两种存储引擎：InnoDB 和 MySAM

### InnoDB

- 若一个主键被定义，则主键则作为密集索引

- 若没有主键被定义，该表的第一个唯一非空索引则作为密集索引

- 若不满足以上条件，innodb内部会生成一个隐藏主键（密集索引）

- 非主键索引存储相关键位和其对应的主键值，包含两次查找。


## 问题

- 为什么需要索引？

    索引可以避免全表扫面，提升检索效率

- 什么样的信息能成为索引

    主键、唯一键等只要是能让数据具备一定区分性的字段都可以成为索引。

- 索引的数据结构

    主流是 B+ 树，还有 Hash 结构及 BitMap 等，Mysql 数据库不支持 Bitmap，不显式支持 hash

- 密集索引和稀疏索引的区别

    密集索引

- 如何定位并优化慢查询SQL

    根据慢日志定位慢查询 sql

    使用 explain 等工具分析 sql

    修改 sql 或尽量让 sql 走索引

## 联合索引的最左匹配原则的成因

比如创建的数据表 person 中将 name 和 age 作为联合索引，name在前，age在后:

```
KEY `index_name_age` (`name`,`age`)
```

如下查找语句都可以使用联合索引进行查找：

```sql
select * from person where name='aaa' and age=15；
select * from person where name='aaa'；
select * from person where age=15 and name='aaa'；
```

而这种查找语句是无法使用联合索引进行查找的：

```sql
select * from person where age=15；
```

这就是联合索引的最左匹配原则。

联合索引最左匹配的成因：

mysql创建复合索引的规则是首先会对复合索引的最左边，也就是索引中的第一个字段进行排序，在第一个字段排序的基础上，在对索引上第二个字段进行排序，其实就像是实现类似order by 字段1，字段2这样的排序规则，那么第一个字段是绝对有序的，而第二个字段就是无序的了，因此一般情况下直接只用第二个字段判断是用不到索引的，这就是为什么mysql要强调联合索引最左匹配原则的原因。

## 索引建立越多越好吗

- 数据量小的表不需要建立索引，建立索引会增加开销

- 数据变更需要维护索引，因此更多的索引以为着更多的维护成本

- 更多的索引意味着也需要更多的空间
